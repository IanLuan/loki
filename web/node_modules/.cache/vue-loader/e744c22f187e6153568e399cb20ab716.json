{"remainingRequest":"/home/ian/dev/late/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ian/dev/late/src/views/Todos.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ian/dev/late/src/views/Todos.vue","mtime":1584723362449},{"path":"/home/ian/dev/late/node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ian/dev/late/node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ian/dev/late/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/ian/dev/late/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/home/ian/dev/late/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ian/dev/late/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBkYiBmcm9tICdAL2ZpcmViYXNlL2luZGV4JzsKCmV4cG9ydCBkZWZhdWx0IHsKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRyYXdlcjogdHJ1ZSwKICAgICAgZG9jdW1lbnRzOiBbXSwKICAgICAgdXNlcnM6IFtdLAogICAgICBkaWE6ICcnLAogICAgICBtZXM6ICcnLAogICAgICBhbm86ICcnLAogICAgfTsKICB9LAoKCiAgY3JlYXRlZCgpIHsKICAgIGxldCByZWYgPSBkYi5yZWYoJ3BvbnRvcycpOwogICAgcmVmLm9uKCJ2YWx1ZSIsIChzbmFwc2hvdCkgPT4gewogICAgICB0aGlzLmRvY3VtZW50cyA9IHNuYXBzaG90LnZhbCgpOwogICAgICAvLyBhcXVpCiAgICAgIGxldCBvcmRlcmVkID0ge307CiAgICAgIGxldCBjb21wYXJlRnVuY3Rpb24gPSAoYSwgYikgPT4gewogICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50c1tiXVsidGltZXN0YW1wIl0gLSB0aGlzLmRvY3VtZW50c1thXVsidGltZXN0YW1wIl07CiAgICAgIH07CgogICAgICAvLyBpZiBhc2MKICAgICAgLy9jb21wYXJlRnVuY3Rpb24gPSAoYSwgYikgPT4gewogICAgICAvLyAgcmV0dXJuIHRoaXMuZG9jdW1lbnRzW2FdWyJ0aW1lc3RhbXAiXSAtIHRoaXMuZG9jdW1lbnRzW2JdWyJ0aW1lc3RhbXAiXTsKICAgICAgLy99CiAgICAgIAogICAgICBPYmplY3Qua2V5cyh0aGlzLmRvY3VtZW50cykuc29ydChjb21wYXJlRnVuY3Rpb24pLmZvckVhY2goKGtleSkgPT4gewogICAgICAgIG9yZGVyZWRba2V5XSA9IHRoaXMuZG9jdW1lbnRzW2tleV07CiAgICAgIH0pOwoKICAgICAgdGhpcy5kb2N1bWVudHMgPSBvcmRlcmVkOwogICAgfSkKCiAgfSwKCiAgbWV0aG9kczogewoKICAgIGZpbHRyYXIoKSB7CiAgICAgIGxldCBkYXRlMSA9IERhdGUucGFyc2UodGhpcy5hbm8gKyAiLSIgKyB0aGlzLm1lcyArICItIiArIHRoaXMuZGlhICsgIiAwMDowMDowMCIpCiAgICAgIGRhdGUxID0gZGF0ZTEudG9TdHJpbmcoKS5zbGljZSgwLCAtMyk7CiAgICAgIGRhdGUxID0gTnVtYmVyKGRhdGUxKQoKICAgICAgbGV0IGRhdGUyID0gRGF0ZS5wYXJzZSh0aGlzLmFubyArICItIiArIHRoaXMubWVzICsgIi0iICsgdGhpcy5kaWEgKyAiIDIwOjU5OjU5IikKICAgICAgZGF0ZTIgPSBkYXRlMi50b1N0cmluZygpLnNsaWNlKDAsIC0zKTsKICAgICAgZGF0ZTIgPSBOdW1iZXIoZGF0ZTIpCiAgICAgIAogICAgICBsZXQgcmVmID0gZGIucmVmKCdwb250b3MnKS5vcmRlckJ5Q2hpbGQoInRpbWVzdGFtcCIpLnN0YXJ0QXQoZGF0ZTEpLmVuZEF0KGRhdGUyKTsKICAgICAgcmVmLm9uKCJ2YWx1ZSIsIChzbmFwc2hvdCkgPT4gewogICAgICAgIHRoaXMuZG9jdW1lbnRzID0gc25hcHNob3QudmFsKCk7CiAgICAgICAgLy8gYXF1aQogICAgICAgIGxldCBvcmRlcmVkID0ge307CiAgICAgICAgbGV0IGNvbXBhcmVGdW5jdGlvbiA9IChhLCBiKSA9PiB7CiAgICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudHNbYl1bInRpbWVzdGFtcCJdIC0gdGhpcy5kb2N1bWVudHNbYV1bInRpbWVzdGFtcCJdOwogICAgICAgIH07CgogICAgICAgIC8vIGlmIGFzYwogICAgICAgIGNvbXBhcmVGdW5jdGlvbiA9IChhLCBiKSA9PiB7CiAgICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudHNbYV1bInRpbWVzdGFtcCJdIC0gdGhpcy5kb2N1bWVudHNbYl1bInRpbWVzdGFtcCJdOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmRvY3VtZW50cykuc29ydChjb21wYXJlRnVuY3Rpb24pLmZvckVhY2goKGtleSkgPT4gewogICAgICAgICAgb3JkZXJlZFtrZXldID0gdGhpcy5kb2N1bWVudHNba2V5XTsKICAgICAgICB9KTsKCiAgICAgICAgdGhpcy5kb2N1bWVudHMgPSBvcmRlcmVkOwogICAgIH0pCgoKICAgIH0sCgoKICAgIGNvbnZlcnQodW5peCl7CgogICAgLy8gVW5peHRpbWVzdGFtcAogICAgdmFyIHVuaXh0aW1lc3RhbXAgPSB1bml4OwoKICAgIC8vIENvbnZlcnQgdGltZXN0YW1wIHRvIG1pbGxpc2Vjb25kcwogICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSh1bml4dGltZXN0YW1wKjEwMDApOwoKICAgIC8vIFllYXIKICAgIHZhciB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpOwoKICAgIC8vIE1vbnRoCiAgICB2YXIgbW9udGggPSBkYXRlLmdldE1vbnRoKCkgKyAxOwogICAgaWYobW9udGggPCAxMCkgewogICAgICBtb250aCA9ICIwIiArIG1vbnRoOwogICAgfQoKICAgIC8vIERheQogICAgdmFyIGRheSA9IGRhdGUuZ2V0RGF0ZSgpOwoKICAgIC8vIEhvdXJzCiAgICB2YXIgaG91cnMgPSBkYXRlLmdldEhvdXJzKCk7CgogICAgLy8gTWludXRlcwogICAgdmFyIG1pbnV0ZXMgPSAiMCIgKyBkYXRlLmdldE1pbnV0ZXMoKTsKCiAgICAvLyBTZWNvbmRzCiAgICB2YXIgc2Vjb25kcyA9ICIwIiArIGRhdGUuZ2V0U2Vjb25kcygpOwoKICAgIC8vIERpc3BsYXkgZGF0ZSB0aW1lIGluIE1NLWRkLXl5eXkgaDptOnMgZm9ybWF0CiAgICB2YXIgY29udmRhdGFUaW1lID0gaG91cnMgKyAnOicgKyBtaW51dGVzLnN1YnN0cigtMikgKyAnOicgKyBzZWNvbmRzLnN1YnN0cigtMikgKyAiIGVtICIgKyBkYXkgKyAiLyIgKyBtb250aCArICIvIit5ZWFyOwogICAgCiAgICByZXR1cm4gY29udmRhdGFUaW1lOwogICAgCiAgICB9CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIGJyZWFrcG9pbnQoKSB7CiAgICAgIGlmICh0aGlzLiR2dWV0aWZ5LmJyZWFrcG9pbnQubmFtZSA9PT0gJ3hzJykgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgfSwKfQo="},{"version":3,"sources":["Todos.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0EA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;;;AAGA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Todos.vue","sourceRoot":"src/views","sourcesContent":["<template>\n\n  <div class=\"pt-3\">\n    <span class=\"subheading grey--text ml-4\">Todos os registros</span>\n\n    <v-container class=\"mt-4 grey lighten-4\" grid-list-lg>\n      \n\n      <v-layout row justify-center align-center>\n      <v-flex xs12 sm10 md8 lg6>\n\n        <v-layout row wrap>\n          <v-flex xs3>\n            <v-text-field\n              label=\"Dia\"\n              single-line\n              dense\n              outlined\n              v-model=\"dia\"\n            ></v-text-field>\n          </v-flex>\n\n          <v-flex xs3>\n            <v-text-field\n              label=\"MÃªs\"\n              single-line\n              dense\n              outlined\n              v-model=\"mes\"\n            ></v-text-field>\n          </v-flex>\n\n          <v-flex xs3>\n            <v-text-field\n              label=\"Ano\"\n              single-line\n              outlined\n              dense\n              v-model=\"ano\"\n            ></v-text-field>\n          </v-flex>\n\n          <v-flex xs3>\n            <v-btn color=\"indigo white--text\" @click=\"filtrar\">Filtrar</v-btn>\n          </v-flex>\n          \n        </v-layout>\n\n        <v-layout column>\n          <v-flex v-for=\"doc in documents\" :key=\"doc.timestamp\">\n\n            <v-card style=\"border-radius: 10px;\" hover>\n              <v-card-title primary-title align-center>\n                <v-layout row wrap justify-space-between align-center>\n                  <span class=\"subtitle-1\" v-if=\"breakpoint\"> {{ doc.nome }} </span>\n                  <span class=\"title\" v-else> {{ doc.nome }} </span>\n                  <span class=\"subtitle-1 font-weight-bold indigo--text\">{{convert(doc.timestamp)}}</span> \n                  <span class=\"subtitle-1 font-weight-bold error--text\" v-if=\"doc.atrasado\">Atrasado</span> \n                  <span class=\"subtitle-1 font-weight-bold success--text\" v-else>Na hora</span> \n                </v-layout>\n              </v-card-title>\n            </v-card>\n\n          </v-flex>\n        </v-layout>\n      </v-flex>\n      </v-layout>\n\n    </v-container>\n  </div>\n\n</template>\n\n<script>\nimport db from '@/firebase/index';\n\nexport default {\n\n  data() {\n    return {\n      drawer: true,\n      documents: [],\n      users: [],\n      dia: '',\n      mes: '',\n      ano: '',\n    };\n  },\n\n\n  created() {\n    let ref = db.ref('pontos');\n    ref.on(\"value\", (snapshot) => {\n      this.documents = snapshot.val();\n      // aqui\n      let ordered = {};\n      let compareFunction = (a, b) => {\n        return this.documents[b][\"timestamp\"] - this.documents[a][\"timestamp\"];\n      };\n\n      // if asc\n      //compareFunction = (a, b) => {\n      //  return this.documents[a][\"timestamp\"] - this.documents[b][\"timestamp\"];\n      //}\n      \n      Object.keys(this.documents).sort(compareFunction).forEach((key) => {\n        ordered[key] = this.documents[key];\n      });\n\n      this.documents = ordered;\n    })\n\n  },\n\n  methods: {\n\n    filtrar() {\n      let date1 = Date.parse(this.ano + \"-\" + this.mes + \"-\" + this.dia + \" 00:00:00\")\n      date1 = date1.toString().slice(0, -3);\n      date1 = Number(date1)\n\n      let date2 = Date.parse(this.ano + \"-\" + this.mes + \"-\" + this.dia + \" 20:59:59\")\n      date2 = date2.toString().slice(0, -3);\n      date2 = Number(date2)\n      \n      let ref = db.ref('pontos').orderByChild(\"timestamp\").startAt(date1).endAt(date2);\n      ref.on(\"value\", (snapshot) => {\n        this.documents = snapshot.val();\n        // aqui\n        let ordered = {};\n        let compareFunction = (a, b) => {\n          return this.documents[b][\"timestamp\"] - this.documents[a][\"timestamp\"];\n        };\n\n        // if asc\n        compareFunction = (a, b) => {\n          return this.documents[a][\"timestamp\"] - this.documents[b][\"timestamp\"];\n        }\n        \n        Object.keys(this.documents).sort(compareFunction).forEach((key) => {\n          ordered[key] = this.documents[key];\n        });\n\n        this.documents = ordered;\n     })\n\n\n    },\n\n\n    convert(unix){\n\n    // Unixtimestamp\n    var unixtimestamp = unix;\n\n    // Convert timestamp to milliseconds\n    var date = new Date(unixtimestamp*1000);\n\n    // Year\n    var year = date.getFullYear();\n\n    // Month\n    var month = date.getMonth() + 1;\n    if(month < 10) {\n      month = \"0\" + month;\n    }\n\n    // Day\n    var day = date.getDate();\n\n    // Hours\n    var hours = date.getHours();\n\n    // Minutes\n    var minutes = \"0\" + date.getMinutes();\n\n    // Seconds\n    var seconds = \"0\" + date.getSeconds();\n\n    // Display date time in MM-dd-yyyy h:m:s format\n    var convdataTime = hours + ':' + minutes.substr(-2) + ':' + seconds.substr(-2) + \" em \" + day + \"/\" + month + \"/\"+year;\n    \n    return convdataTime;\n    \n    }\n  },\n\n  computed: {\n    breakpoint() {\n      if (this.$vuetify.breakpoint.name === 'xs') {\n        return true;\n      }\n      return false;\n    },\n  },\n}\n</script>"]}]}
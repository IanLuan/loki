{"remainingRequest":"/home/ian/dev/late/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ian/dev/late/src/views/Users.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ian/dev/late/src/views/Users.vue","mtime":1584730839097},{"path":"/home/ian/dev/late/node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ian/dev/late/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/ian/dev/late/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/home/ian/dev/late/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ian/dev/late/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBkYiBmcm9tICdAL2ZpcmViYXNlL2luZGV4JzsKCmV4cG9ydCBkZWZhdWx0IHsKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRyYXdlcjogdHJ1ZSwKICAgICAgdXNlcnM6IFtdLAogICAgICBkaWFsb2c6IGZhbHNlLAogICAgICBkb2N1bWVudHM6IFtdLAogICAgICBub21lOiAnJywKICAgIH07CiAgfSwKCgogIGNyZWF0ZWQoKSB7CgogICAgbGV0IHJlZjIgPSBkYi5yZWYoJ3VzZXJzJyk7CiAgICByZWYyLm9uKCJ2YWx1ZSIsIChzbmFwc2hvdCkgPT4gewogICAgICB0aGlzLnVzZXJzID0gc25hcHNob3QudmFsKCk7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMudXNlcnNbMF0uaWQpCiAgICB9KQogIH0sCgogIG1ldGhvZHM6IHsKICAgIG9wZW5EaWFsb2cgKGlkLCBub21lKSB7CiAgICAgIHRoaXMubm9tZSA9IG5vbWU7CgogICAgICBsZXQgcmVmID0gZGIucmVmKCdwb250b3MnKTsKICAgICAgcmVmLm9yZGVyQnlDaGlsZCgiaWQiKS5lcXVhbFRvKGlkKS5vbigidmFsdWUiLCAoc25hcHNob3QpID0+IHsKICAgICAgICB0aGlzLmRvY3VtZW50cyA9IHNuYXBzaG90LnZhbCgpOwogICAgICAgIHRoaXMuZGlhbG9nID0gdHJ1ZTsKCiAgICAgICAgLy8gYXF1aQogICAgICAgIGxldCBvcmRlcmVkID0ge307CiAgICAgICAgbGV0IGNvbXBhcmVGdW5jdGlvbiA9IChhLCBiKSA9PiB7CiAgICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudHNbYl1bInRpbWVzdGFtcCJdIC0gdGhpcy5kb2N1bWVudHNbYV1bInRpbWVzdGFtcCJdOwogICAgICAgIH07CgogICAgICAgIC8vIGlmIGFzYwogICAgICAgIC8vY29tcGFyZUZ1bmN0aW9uID0gKGEsIGIpID0+IHsKICAgICAgICAvLyAgcmV0dXJuIHRoaXMuZG9jdW1lbnRzW2FdWyJ0aW1lc3RhbXAiXSAtIHRoaXMuZG9jdW1lbnRzW2JdWyJ0aW1lc3RhbXAiXTsKICAgICAgICAvL30KICAgICAgICAKICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmRvY3VtZW50cykuc29ydChjb21wYXJlRnVuY3Rpb24pLmZvckVhY2goKGtleSkgPT4gewogICAgICAgICAgb3JkZXJlZFtrZXldID0gdGhpcy5kb2N1bWVudHNba2V5XTsKICAgICAgICB9KTsKCiAgICAgICAgdGhpcy5kb2N1bWVudHMgPSBvcmRlcmVkOwogICAgICAgIGNvbnNvbGUubG9nKG9yZGVyZWQpOyAKICAgICAgfSkKICAgIH0sCgogICAgY29udmVydCh1bml4KXsKCiAgICAvLyBVbml4dGltZXN0YW1wCiAgICB2YXIgdW5peHRpbWVzdGFtcCA9IHVuaXg7CgogICAgLy8gTW9udGhzIGFycmF5CiAgICB2YXIgbW9udGhzX2FyciA9IFsnSmFuJywnRmViJywnTWFyJywnQXByJywnTWF5JywnSnVuJywnSnVsJywnQXVnJywnU2VwJywnT2N0JywnTm92JywnRGVjJ107CgogICAgLy8gQ29udmVydCB0aW1lc3RhbXAgdG8gbWlsbGlzZWNvbmRzCiAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHVuaXh0aW1lc3RhbXAqMTAwMCk7CgogICAgLy8gWWVhcgogICAgdmFyIHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7CgogICAgLy8gTW9udGgKICAgIHZhciBtb250aCA9IG1vbnRoc19hcnJbZGF0ZS5nZXRNb250aCgpXTsKCiAgICAvLyBEYXkKICAgIHZhciBkYXkgPSBkYXRlLmdldERhdGUoKTsKCiAgICAvLyBIb3VycwogICAgdmFyIGhvdXJzID0gZGF0ZS5nZXRIb3VycygpOwoKICAgIC8vIE1pbnV0ZXMKICAgIHZhciBtaW51dGVzID0gIjAiICsgZGF0ZS5nZXRNaW51dGVzKCk7CgogICAgLy8gU2Vjb25kcwogICAgdmFyIHNlY29uZHMgPSAiMCIgKyBkYXRlLmdldFNlY29uZHMoKTsKCiAgICAvLyBEaXNwbGF5IGRhdGUgdGltZSBpbiBNTS1kZC15eXl5IGg6bTpzIGZvcm1hdAogICAgdmFyIGNvbnZkYXRhVGltZSA9IGhvdXJzICsgJzonICsgbWludXRlcy5zdWJzdHIoLTIpICsgJzonICsgc2Vjb25kcy5zdWJzdHIoLTIpICsgIiBubyBkaWEgIiArIGRheSArICIgIiArIG1vbnRoICsgIiAiK3llYXI7CiAgICAKICAgIHJldHVybiBjb252ZGF0YVRpbWU7CiAgICAKICAgIH0KICB9Cgp9Cg=="},{"version":3,"sources":["Users.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA","file":"Users.vue","sourceRoot":"src/views","sourcesContent":["<template>\n\n  <div class=\"pt-3 grey lighten-4\">\n    <span class=\"subheading grey--text ml-4\">Usu√°rios</span>\n\n    <v-container class=\"mt-4 grey lighten-4\" grid-list-lg>\n      \n      <v-layout row justify-center align-center>\n      <v-flex xs12 sm10 md8 lg6>\n        <v-layout column>\n          <v-flex v-for=\"doc in users\" :key=\"doc.id\">\n\n            <v-card style=\"border-radius: 10px;\" hover @click.stop=\"openDialog(doc.id, doc.nome)\">\n              <v-card-title primary-title align-center>\n                <span class=\"title\"> {{ doc.nome }} </span>\n              </v-card-title>\n            </v-card>\n\n          </v-flex>\n        </v-layout>\n      </v-flex>\n      </v-layout>\n\n    </v-container>\n\n    <v-dialog\n      v-model=\"dialog\"\n      width=\"500\"\n    >\n\n      <v-card>\n        <v-card-title\n          class=\"headline lighten-2\"\n          primary-title\n        >\n        <span>{{nome}}</span>\n        </v-card-title>\n\n        <v-card-text>\n          <v-layout column>\n            \n            <v-layout row v-for=\"doc in documents\" :key=\"doc.timestamp\" justify-space-between align-center class=\"pa-2\">\n              <span class=\"title indigo--text\">{{convert(doc.timestamp)}}</span>\n              <span class=\"subtitle-1 font-weight-bold error--text\" v-if=\"doc.atrasado\">Atrasado</span>\n              <span class=\"subtitle-1 font-weight-bold success--text\" v-else>Na hora</span>\n            </v-layout>\n\n          </v-layout>\n        </v-card-text>\n\n        <v-divider></v-divider>\n\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn\n            color=\"indigo\"\n            text\n            @click=\"dialog = false\"\n          >\n            Fechar\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n\n  </div>\n\n</template>\n\n<script>\nimport db from '@/firebase/index';\n\nexport default {\n\n  data() {\n    return {\n      drawer: true,\n      users: [],\n      dialog: false,\n      documents: [],\n      nome: '',\n    };\n  },\n\n\n  created() {\n\n    let ref2 = db.ref('users');\n    ref2.on(\"value\", (snapshot) => {\n      this.users = snapshot.val();\n      console.log(this.users[0].id)\n    })\n  },\n\n  methods: {\n    openDialog (id, nome) {\n      this.nome = nome;\n\n      let ref = db.ref('pontos');\n      ref.orderByChild(\"id\").equalTo(id).on(\"value\", (snapshot) => {\n        this.documents = snapshot.val();\n        this.dialog = true;\n\n        // aqui\n        let ordered = {};\n        let compareFunction = (a, b) => {\n          return this.documents[b][\"timestamp\"] - this.documents[a][\"timestamp\"];\n        };\n\n        // if asc\n        //compareFunction = (a, b) => {\n        //  return this.documents[a][\"timestamp\"] - this.documents[b][\"timestamp\"];\n        //}\n        \n        Object.keys(this.documents).sort(compareFunction).forEach((key) => {\n          ordered[key] = this.documents[key];\n        });\n\n        this.documents = ordered;\n        console.log(ordered); \n      })\n    },\n\n    convert(unix){\n\n    // Unixtimestamp\n    var unixtimestamp = unix;\n\n    // Months array\n    var months_arr = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];\n\n    // Convert timestamp to milliseconds\n    var date = new Date(unixtimestamp*1000);\n\n    // Year\n    var year = date.getFullYear();\n\n    // Month\n    var month = months_arr[date.getMonth()];\n\n    // Day\n    var day = date.getDate();\n\n    // Hours\n    var hours = date.getHours();\n\n    // Minutes\n    var minutes = \"0\" + date.getMinutes();\n\n    // Seconds\n    var seconds = \"0\" + date.getSeconds();\n\n    // Display date time in MM-dd-yyyy h:m:s format\n    var convdataTime = hours + ':' + minutes.substr(-2) + ':' + seconds.substr(-2) + \" no dia \" + day + \" \" + month + \" \"+year;\n    \n    return convdataTime;\n    \n    }\n  }\n\n}\n</script>"]}]}